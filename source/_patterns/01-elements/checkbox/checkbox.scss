@charset "utf-8";

@use "@db-ui/base/build/scss/variables" as *;
@use "@db-ui/base/build/scss/variables.global" as *;
@use "@db-ui/base/build/scss/helpers/functions" as *;
@use "@db-ui/base/build/scss/icon/icons.helpers" as *;

@import "../../../css/partials.meta";

.elm-checkbox {
	// We need to reset the general icons margin, as we want to use it in a tiny space
	--icon-margin-after: 0;
	// Using another CSS variable for the size to differentiate for the small variant later
	--checkbox-size: #{$db-sizing-sm};

	$checkbox-size: 24;

	@extend %db-bg-neutral-0;
	@extend %db-bg-neutral-0-ia-states;

	@include icon("\00A0", $checkbox-size, "outline", $partial: $partial);
	@include icon-meta($font-size: $checkbox-size - 2);

	align-content: center;

	appearance: none;

	aspect-ratio: 1;

	border: calc(var(--checkbox-size, #{$db-sizing-sm}) / 16 + 0.5px) solid
		currentColor;
	border-radius: 3px;

	display: inline-flex;
	height: var(--checkbox-size);
	justify-content: center;

	&[type="checkbox"] {
		vertical-align: bottom;
	}

	// Icons font size
	&::before {
		--icon-font-size: calc(var(--checkbox-size) - 2px);
	}

	&:checked {
		@extend %db-bg-secondary;
		@extend %db-bg-secondary-ia-states;

		border: 0;

		&::before {
			color: inherit;
			content: glyph(done);
		}
	}

	// TODO: We need to set the correct styling / color for invalid

	&:indeterminate {
		&::before {
			content: glyph(minus);
		}
	}

	&:disabled {
		&,
		& + label {
			opacity: 0.25;
		}
	}

	& + label {
		font-size: $db-typography-regular-desktop-body-medium-font-size;
		line-height: $db-typography-regular-desktop-body-medium-line-height;

		margin-inline-start: $db-spacing-fixed-regular-xs;
	}

	// Sizes
	&%size-Small {
		--checkbox-size: calc(#{$db-sizing-sm} * 0.83333333);

		// TODO: we still need to scale this
		& + label {
			font-size: $db-typography-regular-desktop-body-small-font-size;
			line-height: $db-typography-regular-desktop-body-small-line-height;

			margin-inline-start: $db-spacing-fixed-regular-2xs;
		}
	}

	&[data-size="small"] {
		@extend %size-Small;
	}

	&:required {
		& + label {
			&::after {
				content: " *";
			}
		}
	}
}
