@charset "utf-8";

@use "@db-ui/base/build/scss/variables" as *;
@use "@db-ui/base/build/scss/variables.global" as *;
@use "@db-ui/base/build/scss/helpers/functions" as *;
@use "@db-ui/base/build/scss/color-placeholder" as *;

.elm-radio {
	// Using another CSS variable for the size to differentiate for the small variant later
	--radio-size: #{$db-sizing-sm};

	@extend %db-bg-neutral-0-ia;

	appearance: none;

	aspect-ratio: 1;

	border: max(calc(var(--radio-size, #{$db-sizing-sm}) / 16 + 0.5px), 2px)
		solid currentColor;
	border-radius: to-em($pxValue: 16);

	// * the basic, unchecked style
	display: inline-block;

	height: var(--radio-size);

	transition: border-width 0.5s ease;

	&[type="radio"] {
		vertical-align: bottom;
	}

	&:checked {
		@extend %db-bg-neutral-0;

		border-width: calc(#{$db-sizing-sm} * 0.3);

		// adapted from color-placeholder, as this isn't that flexible in there already
		&:not(:disabled) {
			&:hover {
				--db-current-color: #{$db-colors-neutral-on-bg-hover};
				color: $db-colors-neutral-on-bg-hover;

				background-color: initial;
			}

			&:active {
				--db-current-color: #{$db-colors-neutral-on-bg-pressed};
				color: $db-colors-neutral-on-bg-pressed;
			}
		}
	}
	// * the invalid style using the :invalid pseudo class (and [aria-invalid="true"] equivalent, see #136 and #141)
	// TODO: We need to set the correct styling / color here after alignment
	&:invalid,
	&[aria-invalid="true"] {
		border-color: #c13e34;
	}
	// * TODO: never forget focus styling
	// &:focus::after {
	// content: "\0020\2190";
	// font-size: to-em($pxValue: 24);
	// line-height: 1;
	// vertical-align: -(to-em($pxValue: 2));
	// }

	& + label {
		font-size: $db-typography-regular-desktop-body-medium-font-size;
		line-height: $db-typography-regular-desktop-body-medium-line-height;

		margin-inline-start: $db-spacing-fixed-regular-xs;
	}

	&:disabled {
		&,
		& + label {
			opacity: 0.25;
		}
	}

	&:required {
		& + label {
			&::after {
				content: "*";
			}
		}
	}

	// Sizes
	&%size-Small {
		--radio-size: calc(#{$db-sizing-sm} * 0.83333333);

		&:checked {
			border-width: calc(#{$db-sizing-sm} * 0.83333333 * 0.3);
		}

		& + label {
			font-size: $db-typography-regular-desktop-body-small-font-size;
			line-height: $db-typography-regular-desktop-body-small-line-height;

			margin-inline-start: $db-spacing-fixed-regular-2xs;
		}
	}

	&[data-size="small"] {
		@extend %size-Small;
	}

	// Adopted by https://www.heise.de/developer/artikel/a11y-Reduced-Motion-4356171.html
	@media (prefers-reduced-motion: reduce) {
		transition-duration: 0.01s !important;
	}
}
